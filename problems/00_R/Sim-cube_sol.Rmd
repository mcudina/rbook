We want to vary the parameter `eps` later, so let's write a function first:

```{r}
simulate = function(nsim, eps, conditional) {
  x = runif(nsim)
  y = runif(nsim)
  z = runif(nsim)
  d1 = sqrt((1-x)^2+(1-y)^2+(1-z)^2)
  if (conditional) {
    d0 = sqrt(x^2+y^2+z^2)
    cond = (d0 > 1.5-eps) & (d0<1.5+eps)
    return( d1[cond] )
  } else {
    return(d1)
  }
}
```

Histograms may be used as approximations to the pdf of the (conditional) distribution:

```{r}
nsim = 1000000
eps = 0.1
d1_cond = simulate(nsim,eps,conditional=TRUE)
d1 = simulate(nsim,eps, conditional=FALSE)
par(mfrow=c(1,2))
hist(d1, breaks=50)
hist(d1_cond, breaks=50)

```

Note that, in addition to clearly different shapes,  the supports of the two distributions differ, too. Unconditionally, the distance to $(1,1,1)$ can be any number from $0$ to $\sqrt{3} \approx 1.73$. If it is known that the distance to $(0,0,0)$ is $1.5$, however, the distance to $(1,1,1)$ cannot be larger than $1$.

Finally, let us compare the results we obtain by varying the parameter $\eps$, first with `nsim=100000`:
```{r echo=-1}
set.seed(1223)
nsim = 100000
epss = c( 2, 1, 0.5, 0.3, 0.2, 0.1, 0.02, 0.01, 0.001, 0.0001)
d1s = vector(length=length(epss))
for ( eps in epss) {
  sims =     simulate(nsim, eps = eps, conditional = TRUE)
  print( paste( "Eps = ", eps, ", Draws = ",length(sims)," Mean = ",mean(sims) ))
}

```

The same experiment, but with `nsim=1000000` yields:

```{r}
nsim = 1000000
epss = c( 2, 1, 0.5, 0.3, 0.2, 0.1, 0.02, 0.01, 0.001, 0.0001)
d1s = vector(length=length(epss))
for ( eps in epss) {
  sims =     simulate(nsim, eps = eps, conditional = TRUE)
  print( paste( "Eps = ", eps, ", Draws = ",length(sims)," Mean = ",mean(sims) ))
}
```